<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Catálogo de Juegos</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #2c3e50; /* Fondo oscuro */
            color: #ecf0f1; /* Texto claro */
            margin: 0;
            padding: 0;
        }
        h1 {
            background-color: #34495e;
            color: white;
            padding: 20px;
            margin: 0;
            text-align: center;
        }
        nav {
            background-color: #16a085; /* Color de los botones */
            padding: 10px;
            text-align: center;
        }
        nav button {
            background-color: #2ecc71;
            color: white;
            border: none;
            padding: 10px 20px;
            font-size: 16px;
            margin: 5px;
            cursor: pointer;
            border-radius: 5px;
        }
        nav button:hover {
            background-color: #27ae60;
        }
        #buscador {
            margin-bottom: 15px;
            display: flex;
            justify-content: flex-end; /* Alinea a la derecha */
            gap: 10px;
        }
        #search {
            padding: 8px;
            font-size: 16px;
            width: 200px;
            border: 1px solid #ccc;
            border-radius: 4px;
        }
        #ordenar {
            padding: 8px;
            font-size: 16px;
            border: 1px solid #ccc;
            border-radius: 4px;
        }
        #genero {
            padding: 8px;
            font-size: 16px;
            border: 1px solid #ccc;
            border-radius: 4px;
        }
        .container {
            max-width: 1600px;
            margin: 20px auto;
            padding: 20px;
            background-color: #34495e; /* Fondo de la sección de contenido */
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }
        .game-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
            justify-items: center;
        }
        .game {
            background-color: #2c3e50; /* Fondo oscuro para los juegos */
            border: 2px solid #bdc3c7;
            border-radius: 8px;
            padding: 15px;
            width: 100%;
            text-align: center;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .game:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 12px rgba(0, 0, 0, 0.2);
        }
        .game img {
            width: 100%;
            height: auto;
            border-radius: 5px;
        }
        .game p {
            font-weight: bold;
            margin: 10px 0;
        }
        .game a {
            color: #2ecc71; /* Enlace verde */
            text-decoration: none;
            font-weight: bold;
            transition: color 0.3s ease;
        }
        .game a:hover {
            color: #27ae60;
        }
    </style>
</head>
<body>
    <h1>Catálogo de Juegos</h1>
    <nav>
        <button onclick="showList('plus')">PlayStation Plus</button>
        <button onclick="showList('gamepass')">Game Pass</button>
        <button onclick="showList('coincidencias')">Coincidencias</button>
    </nav>

    <!-- Buscador, Ordenar y Filtro por Género -->
    <div id="buscador">
        <input type="text" id="search" placeholder="Buscar juego..." oninput="buscarJuego()">
        <select id="ordenar" onchange="ordenarJuegos()">
            <option value="asc">Ordenar A-Z</option>
            <option value="desc">Ordenar Z-A</option>
            <option value="crossplay">Crossplay primero</option>
        </select>
        <select id="genero" onchange="filtrarPorGenero()">
            <option value="">Seleccionar Género</option>
            <option value="Acción">Acción</option>
            <option value="Aventura">Aventura</option>
            <option value="RPG">RPG</option>
            <option value="Deportes">Deportes</option>
            <option value="Estrategia">Estrategia</option>
            <option value="Indie">Indie</option>
            <option value="Plataforma">Plataformas</option>
            <option value="Terror">Terror</option>
            <option value="Fiesta">Fiesta</option>
            <option value="Shooter">Shooter</option>
            <option value="Simulación">Simulación</option>
            <option value="Exploración">Exploración</option>
            <option value="Suspense">Suspense</option>
            <option value="Estrategia">Estrategia</option>
            <option value="Puzles">Puzles</option>
            <option value="Lucha">Lucha</option>
        </select>
    </div>

    <div id="content" class="container"></div>
    
    <script>
        let juegosPlus = [
     {
                titulo: "A Space for the Unbound",
                portada: "https://i.postimg.cc/Vkh21WS5/MV5-BYjgz-Nz-A4-N2-Ut-MDgz-OC00-N2-Ri-LTg3-ZTYt-NGYw-NTc0-MDEz-Mj-Ew-Xk-Ey-Xk-Fqc-Gc-V1-FMjpg-UX1000.jpg",
                enlace: "https://example.com/a-space-for-the-unbound",
                descripcion: "Un juego de aventuras con una narrativa profunda y una estética encantadora.",
                genero: "Aventura, Indie",
                jugadores: "Single Player",
                coop: "Hasta 2 jugadores Local",
                crossplay: "No"
     },
     { 
        titulo: "After Us", 
        portada: "https://via.placeholder.com/250", 
        enlace: "#", 
        descripcion: "Explora un mundo surrealista y salva las almas de los animales extintos en esta aventura narrativa.", 
        genero: "Aventura, Plataforma", 
        coop: "Single Player", 
        jugadores: "1", 
        crossplay: "No" 
    }
        ];
        
        let juegosGamePass = [
            { 
        titulo: "A Plague Tale: Requiem", 
        portada: "https://store-images.s-microsoft.com/image/apps.4956.13558336166432541.beb57fbe-cc4b-40c5-ba76-c8112867dea2.43b4dea4-61a1-4ffc-81ab-62cf72323363", 
        enlace: "#", 
        descripcion: "La secuela de A Plague Tale: Innocence, donde Amicia y Hugo luchan por sobrevivir en un mundo brutal y oscuro.", 
        genero: "Aventura, Acción", 
        coop: "Single Player", 
        jugadores: "1", 
        crossplay: "No" 
    },
    { 
        titulo: "A Short Hike", 
        portada: "https://via.placeholder.com/250", 
        enlace: "#", 
        descripcion: "Explora libremente la montaña mientras escalas, vuelas y descubres secretos en esta relajante aventura.", 
        genero: "Aventura, Exploración", 
        coop: "Single Player", 
        jugadores: "1", 
        crossplay: "No" 
    }
    
        ];
        
        let tipoActual = "plus"; // Cambiar esto según la lista seleccionada: 'plus', 'gamepass', 'coincidencias'
let juegosFiltrados = juegosPlus; // Variable para almacenar los juegos filtrados por búsqueda y género

function showList(type) {
    tipoActual = type;
    if (type === 'plus') juegosFiltrados = juegosPlus;
    else if (type === 'gamepass') juegosFiltrados = juegosGamePass;
    else if (type === 'coincidencias') {
        juegosFiltrados = juegosPlus.filter(j => juegosGamePass.some(g => g.titulo === j.titulo));
    }

    actualizarJuegosFiltrados(); // Llamar a la función de filtrado y búsqueda
}

// Función para cargar el JSON desde el repositorio de GitHub
async function cargarDatosJuegos() {
    try {
        const response = await fetch('datosjuegos.json');
        
        if (!response.ok) {
            throw new Error('Error al cargar el archivo JSON');
        }

        const datosJuegos = await response.json();

        // Llamar a la función para mostrar los juegos una vez se cargue el JSON
        showGames(datosJuegos);
    } catch (error) {
        console.error('Hubo un problema al cargar el JSON:', error);
    }
}

// Función para mostrar los juegos en el HTML
function showGames(datosJuegos) {
    const content = document.getElementById('content');
    content.innerHTML = '<div class="game-list">' + juegosFiltrados.map(juego => {
        const gameData = datosJuegos.find(j => j.productTitle === juego.titulo);
        
        const newPortada = gameData ? gameData.images.Poster[0] : juego.portada;

        return `
            <div class="game">
                <img src="${newPortada}" alt="${juego.titulo}">
                <p><strong>${juego.titulo}</strong></p>
                <p style="text-align: justify;">${juego.descripcion}</p>
                <p><strong>Género:</strong> ${juego.genero}</p>
                <p><strong>${juego.jugadores} | ${juego.coop}</strong></p>
                <p><strong style="color: ${juego.crossplay === 'Sí' ? 'green' : 'red'};">Crossplay:</strong> <span style="color: ${juego.crossplay === 'Sí' ? 'green' : 'red'};"> ${juego.crossplay || 'No disponible'}</span></p>
                <a href="${juego.enlace}" target="_blank">Más información</a>
            </div>
        `;
    }).join('') + '</div>';
}

// Llamar a la función para cargar los datos al iniciar la página
cargarDatosJuegos(); // Aquí se carga el JSON y luego se muestran los juegos

// Función optimizada para filtrar, buscar y mostrar juegos
function actualizarJuegosFiltrados() {
    if (tipoActual === "plus") {
        juegosFiltrados = juegosPlus;
    } else if (tipoActual === "gamepass") {
        juegosFiltrados = juegosGamePass;
    } else if (tipoActual === "coincidencias") {
        juegosFiltrados = juegosPlus.filter(j => juegosGamePass.some(g => g.titulo === j.titulo));
    }
    
    // Filtrar por género
    const generoSeleccionado = document.getElementById('genero').value;
    if (generoSeleccionado) {
        juegosFiltrados = juegosFiltrados.filter(juego => juego.genero && juego.genero.toLowerCase().includes(generoSeleccionado.toLowerCase()));
    }
    
    // Buscar por título
    const searchTerm = document.getElementById('search').value.toLowerCase();
    if (searchTerm !== "") {
        juegosFiltrados = juegosFiltrados.filter(juego => juego.titulo.toLowerCase().includes(searchTerm));
    }
    
    showGames(datosJuegos); // Llamar a showGames después de actualizar los filtros
}

// Función para ordenar los juegos
function ordenarJuegos() {
    const order = document.getElementById('ordenar').value;
    if (order === "asc") {
        juegosFiltrados.sort((a, b) => a.titulo.localeCompare(b.titulo));
    } else if (order === "desc") {
        juegosFiltrados.sort((a, b) => b.titulo.localeCompare(a.titulo));
    } else if (order === "crossplay") {
        juegosFiltrados.sort((a, b) => {
            if (a.crossplay === "Sí" && b.crossplay !== "Sí") return -1;
            if (a.crossplay !== "Sí" && b.crossplay === "Sí") return 1;
            return a.titulo.localeCompare(b.titulo);
        });
    }
    showGames(datosJuegos); // Llamar a showGames después de ordenar
}

// Mostrar la lista de juegos de PlayStation Plus por defecto
showList('plus');

// Eventos de actualización de los filtros
document.getElementById('genero').addEventListener('change', actualizarJuegosFiltrados);
document.getElementById('search').addEventListener('input', actualizarJuegosFiltrados);
document.getElementById('ordenar').addEventListener('change', ordenarJuegos);


    </script>
</body>
</html>
